def getday = env.BUILD_TIMESTAMP
getday = getday.split(" ")
// Extract current day
getday = getday [3]
def gethour = env.BUILD_TIMESTAMP
gethour = gethour.split(" ")
// Extract current day
gethour = gethour [1]

pipeline 
{
    agent any
    options { timestamps () }
    
    stages {
    
        stage('check system') {
            steps {
                    // do something
                    // check to make sure nsecs are stored in environment variables and return the relevant npubs
                    // check to make sure that all target relays are running
                    echo "system check PASS"
                }
        }

        stage('finance bot') {
            when 
                {
                    // Note: You can change condition as per your need
                    // Stage will run only when the day is Mon 
                    expression {
                        getday == "Mon"
                    }
                }
            steps {
                    // post some financial data
                    echo getday
                }
        }

        stage('catholic morning bot') {
            when 
                {
                    // Note: You can change condition as per your need
                    // Stage will run only when the hour is 5 am 
                    expression {
                        gethour == "05"
                    }
                }
            steps {
                    // post morning readings
                    echo gethour
                }
        }

        stage('catholic evening bot') {
            when 
                {
                    // Note: You can change condition as per your need
                    // Stage will run only when the hour is 5 pm
                    expression {
                        gethour == "17"
                    }
                }
            steps {
                    // post evening readings
                    echo gethour
                }
        }
    }
}