pipeline 
{
    agent any
    
    environment {
        NOSTR_BOT_KEY2 = credentials('NOSTR_BOT_KEY2')
        NOSTR_BOT_KEY3 = credentials('NOSTR_BOT_KEY3')
    }

    stages {
    
        stage('build') {
            steps {
                    // Make sure dependencies are installed
                    sh 'composer install'
                    echo "NOSTR_BOT_KEY2: ${NOSTR_BOT_KEY2}"
                    echo "NOSTR_BOT_KEY3: ${NOSTR_BOT_KEY3}"
                }
            }

        stage('catholic morning bot') {
            steps {
                script {
                    // post morning readings
                    def output = sh(returnStdout: true, script: 'php src/botscripts/catholicMorningBot.php')
                    echo "Output: ${output}"
                    def output2 = sh(returnStdout: true, script: 'php src/botscripts/katholischMorningBot.php')
                    echo "Output: ${output2}"
                }
            }
        }
    }
}
